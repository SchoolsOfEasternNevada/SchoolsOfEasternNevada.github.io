<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>G.GUI — Offline Browser</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="assets/img/favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  height: 100%;
  background: #000;
  font-family: 'Orbitron', sans-serif;
  color: #9ffcff;
  overflow: hidden;
}

/* ===== TOP BAR ===== */
.top {
  height: 60px;
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 10px;
  border-bottom: 2px solid rgba(0,255,255,0.4);
  box-shadow: 0 0 20px rgba(0,255,255,0.4);
}

.url-input {
  flex: 1;
  height: 36px;
  background: #050505;
  border: 2px solid rgba(0,255,255,0.6);
  color: #9ffcff;
  padding: 0 12px;
  border-radius: 8px;
}

.btn {
  height: 36px;
  padding: 0 18px;
  border-radius: 8px;
  border: 2px solid #9ffcff;
  background: transparent;
  color: #9ffcff;
  cursor: pointer;
  box-shadow: 0 0 12px #00ffff;
}

.btn:hover {
  box-shadow: 0 0 25px #00ffff;
}

/* ===== TABS ===== */
.tabs {
  height: 44px;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px;
  background: #050505;
  border-bottom: 2px solid rgba(0,255,255,0.4);
  overflow-x: auto;
}

.tab {
  padding: 6px 14px;
  border-radius: 6px;
  border: 2px solid rgba(0,255,255,0.4);
  cursor: pointer;
  white-space: nowrap;
}

.tab.active {
  background: #0ff2;
  box-shadow: 0 0 15px #00ffff;
}

/* ===== VIEW ===== */
.viewer {
  height: calc(100% - 104px);
}

iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* ===== POPUPS ===== */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.popup {
  width: 90%;
  max-width: 520px;
  background: #050505;
  padding: 28px;
  border-radius: 22px;
  border: 2px solid rgba(0,255,255,0.8);
  box-shadow: 0 0 40px rgba(0,255,255,0.6);
  text-align: center;
}

.popup h2 {
  margin-bottom: 14px;
}

.popup p {
  font-size: 14px;
  opacity: 0.85;
  line-height: 1.6;
}

.popup textarea {
  width: 100%;
  height: 90px;
  margin-top: 14px;
  background: #000;
  border: 2px solid rgba(0,255,255,0.5);
  color: #9ffcff;
  border-radius: 10px;
  padding: 10px;
}

.hidden {
  display: none;
}
</style>
</head>

<body>

<!-- FIRST USE POPUP -->
<div class="overlay" id="helpPopup">
  <div class="popup">
    <h2>Offline Browser Mode</h2>
    <p>
      • Load sites while online<br>
      • Keep tabs open for offline play<br>
      • Some sites block embedding<br>
      • Save / load tab setups with codes
    </p>
    <br>
    <button class="btn" onclick="closeHelp()">Continue</button>
  </div>
</div>

<!-- LOAD POPUP -->
<div class="overlay hidden" id="loadPopup">
  <div class="popup">
    <h2>Load Tab Setup</h2>
    <textarea id="loadInput" placeholder="Paste code here..."></textarea>
    <br><br>
    <button class="btn" onclick="loadTabs()">Load</button>
  </div>
</div>

<!-- TOP -->
<div class="top">
  <input class="url-input" id="urlInput" placeholder="Enter website URL">
  <button class="btn" onclick="openTab()">Open</button>
  <button class="btn" onclick="saveTabs()">Save</button>
  <button class="btn" onclick="showLoad()">Load</button>
</div>

<!-- TABS -->
<div class="tabs" id="tabs"></div>

<!-- VIEW -->
<div class="viewer">
  <iframe id="frame"></iframe>
</div>

<script>
let tabs = [];
let current = -1;

/* HELP */
function closeHelp() {
  document.getElementById('helpPopup').classList.add('hidden');
}

/* URL FIX */
function normalize(url) {
  if (!url.startsWith('http://') && !url.startsWith('https://')) {
    return 'https://' + url;
  }
  return url;
}

/* OPEN TAB */
function openTab() {
  let url = normalize(document.getElementById('urlInput').value.trim());
  if (!url) return;

  tabs.push(url);
  current = tabs.length - 1;
  renderTabs();
  loadFrame();
}

/* RENDER */
function renderTabs() {
  const bar = document.getElementById('tabs');
  bar.innerHTML = '';

  tabs.forEach((url, i) => {
    const t = document.createElement('div');
    t.className = 'tab' + (i === current ? ' active' : '');
    t.textContent = url.replace(/^https?:\/\//,'').slice(0,5);
    t.onclick = () => {
      current = i;
      renderTabs();
      loadFrame();
    };
    bar.appendChild(t);
  });
}

/* LOAD FRAME */
function loadFrame() {
  document.getElementById('frame').src = tabs[current];
}

/* SAVE */
function saveTabs() {
  const data = btoa(JSON.stringify(tabs));
  navigator.clipboard.writeText(data);
  alert('Tab setup copied to clipboard!');
}

/* LOAD */
function showLoad() {
  document.getElementById('loadPopup').classList.remove('hidden');
}

function loadTabs() {
  try {
    const raw = document.getElementById('loadInput').value.trim();
    tabs = JSON.parse(atob(raw));
    current = 0;
    renderTabs();
    loadFrame();
    document.getElementById('loadPopup').classList.add('hidden');
  } catch {
    alert('Invalid code');
  }
}
</script>

</body>
</html>
